<!DOCTYPE html>
<html lang="sk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kolekcia â€“ LumiÃ¨ra Noir</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

  <!-- BACKGROUNDS -->
  <div class="galaxy"></div>
  <div class="city"></div>

  <!-- NAVBAR -->
  <nav>
    <div class="nav-inner">
      <div class="logo">LUMIÃˆRA NOIR</div>
      <div class="menu">
        <a href="index.html">Domov</a>
        <a href="collection.html" class="active">Kolekcia</a>
        <a href="vision.html">VÃ­zia</a>
        <a href="private-order.html">VlastnÃ¡ objednÃ¡vka</a>
        <a href="about.html">O nÃ¡s</a>
        <a href="cart.html">KoÅ¡Ã­k</a>
      </div>
    </div>
  </nav>

  <!-- GRID PRODUCTS -->
  <section class="grid"></section>

  <!-- MODAL -->
  <div class="modal" id="modal">
    <div class="close" onclick="closeModal()">âœ•</div>
    <div class="modal-box">
      <img id="modalImg" src="" alt="Produkt">
      <h2 id="modalName"></h2>
      <p id="modalDesc"></p>

      <!-- Variant & UV -->
      <select id="modalVariant"></select>
      <button id="modalUVBtn" onclick="toggleUV()">ZmeniÅ¥ variant UV ğŸ”¹</button>

      <!-- Wishlist & Cart -->
      <button onclick="addToCartFromModal()">ğŸ›’ PridaÅ¥ do koÅ¡Ã­ka</button>
      <button id="modalWishlistBtn">â¤ï¸ ObÄ¾ÃºbenÃ©</button>
    </div>
  </div>

  <!-- WISHLIST GRID -->
  <section class="wishlist-section">
    <h2>ObÄ¾ÃºbenÃ© produkty</h2>
    <div class="container">
      <div id="wishlistGrid"></div>
    </div>
  </section>

  <script src="js/app.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // Render kolekcie a wishlistu
      renderCollection();
      renderWishlist();

      // Wishlist tlaÄidlo v modale
      const modalWishlistBtn = document.getElementById("modalWishlistBtn");
      modalWishlistBtn.addEventListener("click", () => {
        const data = window.artifactsState.modalData;
        let wishlist = window.artifactsState.wishlist || [];
        const exists = wishlist.find(i => i.name === data.name);
        if(exists){
          wishlist = wishlist.filter(i => i.name !== data.name);
          showEphemeral("wishlist", "OdstrÃ¡nenÃ© z obÄ¾ÃºbenÃ½ch");
        } else {
          wishlist.push({...data, qty:1});
          showEphemeral("wishlist", "PridanÃ© do obÄ¾ÃºbenÃ½ch");
        }
        window.artifactsState.wishlist = wishlist;
        renderWishlist();
      });
    });

    // Ephemeral feedback
    function showEphemeral(id, message){
      const el = document.createElement("div");
      el.className = "ephemeral";
      el.innerText = message;
      document.body.appendChild(el);
      setTimeout(()=>el.remove(), 1200);
    }
  </script>

</body>
</html>
